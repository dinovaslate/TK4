{% extends "main/base.html" %}
{% block title %}RagaSpace — Wishlist{% endblock %}
{% block content %}
<section class="container" style="padding:48px 0; display:grid; gap:28px;">
  <div class="intro" style="justify-content:space-between; flex-wrap:wrap;">
    <div class="copy">
      <h2>Your saved arenas</h2>
      <p>Review your shortlisted venues and jump back in to secure the perfect time slot.</p>
    </div>
    <a class="btn" href="{% url 'catalog' %}">Discover more</a>
  </div>
  <div class="grid">
    {% for item in items %}
      <article class="card">
        <div class="card-media">
          <span class="cat">{{ item.venue.category.name }}</span>
          <img src="{{ item.venue.hero_image }}" alt="{{ item.venue.name }}" />
          <form method="post" action="{% url 'toggle_wishlist' item.venue.slug %}" class="heart">
            {% csrf_token %}
            <input type="hidden" name="next" value="{{ request.get_full_path }}" />
            <button type="submit" aria-label="Remove from wishlist" style="all:unset; display:grid; place-items:center;">
              <svg width="20" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 21s-6.5-4.35-9-8.88C1.5 6.6 4.74 3 8.4 3c2.16 0 3.6 1.34 3.6 1.34S13.44 3 15.6 3C19.26 3 22.5 6.6 21 12.12 18.5 16.65 12 21 12 21Z" fill="#ff5d6c" stroke="#ff5d6c" stroke-width="1.4" />
              </svg>
            </button>
          </form>
        </div>
        <div class="card-body">
          <h3>{{ item.venue.name }}</h3>
          <div class="meta">
            <span>{{ item.venue.city }}</span>
            <span>•</span>
            <span>{{ item.venue.capacity }} people</span>
          </div>
          <p style="color:var(--muted); font-size:13px; min-height:54px;">{{ item.venue.description|truncatewords:20 }}</p>
          <div class="price">
            <span class="tag">IDR {{ item.venue.price_per_hour|floatformat:0 }}/hour</span>
            <a class="link" href="{{ item.venue.get_absolute_url }}">Book</a>
          </div>
        </div>
      </article>
    {% empty %}
      <div style="background:rgba(7,27,32,.6); border:1px solid var(--stroke); border-radius:18px; padding:24px;">
        <h3 style="margin-top:0;">Your wishlist is empty</h3>
        <p style="color:var(--muted);">Browse the catalog and tap the heart icon to save dream venues for later.</p>
        <a class="btn" href="{% url 'catalog' %}" style="margin-top:12px; display:inline-flex;">Find venues</a>
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
